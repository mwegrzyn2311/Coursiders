<div *ngIf="course != null" class="course-container">
    <div class="image-container">
        <img src="{{course.icon}}">
    </div>
    <table>
        <tr>
            <th>Course</th>
            <th>Format</th>
            <th>Term</th>
            <th>Capacity</th>
            <th>Places left</th>
            <th>ECTS</th>
            <th>Exam</th>
        </tr>
        <tr>
            <td>{{course.name}}</td>
            <td>{{course.format}}</td>
            <td>{{course.term}}</td>
            <td>{{course.capacity}}</td>
            <td>{{course.capacity - course.spotsTaken}}</td>
            <td>{{course.ects}}</td>
            <td *ngIf="course.exam === true">+</td>
            <td *ngIf="course.exam === false">-</td>
        </tr>
    </table>
    
    <div>
        <div class="score-container">
            <ngb-rating *ngIf="!courseRated() && courseJoined()" [(rate)]="rating" [max]="10">
                <ng-template let-fill="fill" let-index="index">
                <span class="star" [class.full]="fill === 100">
                    <span class="half" [style.width.%]="fill" (click)="rate(index+1)">&#9733;</span>&#9733;
                </span>
                </ng-template>
            </ngb-rating>
            <ngb-rating *ngIf="courseRated() || !courseJoined()" [readonly]="true" [(rate)]="rating" [max]="10">
                <ng-template let-fill="fill" let-index="index">
                    <span class="star" [class.full]="fill === 100">
                        <span class="half" [style.width.%]="fill">&#9733;</span>&#9733;
                    </span>
                </ng-template>
            </ngb-rating>
        </div>
    </div>
    <div *ngIf="user && user.role==='admin'" class="row buttons-container">
        <button class="btn yellow col-lg-2 col-md-3 col-sm-4"  (click)="startEditingCourse()">Edit Course</button>
        <div class="d-sm-none d-md-block empty col-lg-3 col-md-1"></div>
        <button class="btn red col-lg-2 col-md-4 col-sm-4" (click)="deleteCourse()">Delete Course</button>
        <div class="d-sm-none d-md-block empty col-lg-3 col-md-1"></div>
        <button class="btn green col-lg-2 col-md-3 cols-sm-4" *ngIf="!courseJoined()" (click)="joinCourse()">Join Course</button>
    </div>
    <div *ngIf="user && user.role!=='admin'" class="row button-container">
        <div class="col-lg-10 col-md-9 col-8 empty"></div>
        <button class="btn green col-lg-2 col-md-3 col-4 float-left" *ngIf="!courseJoined()" (click)="joinCourse()">Join Course</button>
    </div>
</div>
